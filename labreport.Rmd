---
title: "lab report"
author: "Aaron Willcox"
date: "09/07/2018"
output: html_document
fontsize: 12pt
geometry: margin = 1.2in
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:


```{r}
# Included librarys for functions
library(psych)
library(haven)
library(dplyr)
library(labelled)
```

# import 
SPSS file into a data frame using the haven package
Reading SPSS-data with haven keeps the numeric values for variables and adds the value and variable labels as attributes.

**DV:** Personal Wellbeing Index (pwi)  
**IVs:** Affect(affect), Cogniton(cognition), Gender(gender), Personality(personality), Employment(employment).

```{r}

well_being_df <- read_sav("WellbeingFINAL.sav")
attach(well_being_df)
View(well_being_df)
```

# Take a look at the data
```{r}
colnames(well_being_df)
describe(well_being_df)
```

# Check for missing or na data
```{r}
which(is.na(well_being_df))
```

# Subsetting and variables setup

Getting errors when modelling from different data types. Needed to convert each variable to a group factor. Created a function to make this happen quicker. 

```{r}
#learning to use the sapply function to a list and converting factors to numeric types
pwi <- sapply(well_being_df[,4:10], as.numeric)

personality <- sapply(well_being_df[,11:60], as.numeric)

cognition <- sapply(well_being_df[,64:70], as.numeric)

affect <- sapply(well_being_df[,61:63], as.numeric)

employment <- sapply(well_being_df[,3], as.numeric)

gender <- sapply(well_being_df[,2], as.numeric)

age <- sapply(well_being_df[,1], as.numeric)
#function
create_col_variable <- function(x,y)
  sapply(well_being_df[,x:y], as.numeric) #need to figure out how it could take a blank argument: x <- create_col_variable(,2) for example.

```


Print the labels attributed with the variables on import
```{r}
val_labels(well_being_df$Gender)
#attributes(well_being_df)
```


```{r}
#for each gender summarise the mean, sd, min and max values 1 = Male, 2 = Female and 3 = Transgender
Gender <- select(well_being_df, Gender, Age) %>%
  mutate(Gender = labelled::to_factor(Gender)) %>%
  group_by(Gender) %>%
  summarise_all(funs(mean, n = n(), sd, min(.,is.na = FALSE), max(.,is.na = FALSE)))
Gender
describe(Gender)

#For each employment status (1:5) summarise mean, sd min and max values 
Employment <- select(well_being_df, EmploymentStatus, Gender) %>% 
  mutate(EmploymentStatus = labelled::to_factor(EmploymentStatus)) %>% # use labelled package 
  group_by(EmploymentStatus) %>% 
  summarise_all(funs(mean, n = n(), sd,min(.,is.na = TRUE), max(.,is.na = TRUE)))
Employment$EmploymentStatus
describe(Employment)
```


***
The core set of items forming the PWI comprise of seven questions of satisfaction with specific life domains as follows:

##### Questions
|How satisfied are you with...? | Domains |
1. your standard of living? | Standard of Living |
2. your health?| Personal Health |
3. what you are achieving in life?| Achieving in Life |
4. your personal relationships?|  Personal Relationships |
5. how safe you feel?| Personal Safety |
6. feeling part of your community?| Community-Connectedness|
7. your future security?|  Future Security|



Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
